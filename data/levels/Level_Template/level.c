#include "level.h"
#include "../../level_themes/Mars/theme.h"
#include "sk64/skelatool_defs.h"
#include <ultra64.h>

Vtx Level_Template_Grid_001_color[] = {
    {{{-4007, 0, 0}, 0, {-763, 8}, {203, 98, 97, 255}}},
    {{{-4783, 524, -2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{-4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{-4007, 0, 4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{-4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{-4783, 524, -2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{-5780, 524, 12}, 0, {-761, 991}, {203, 98, 97, 255}}},
    {{{-5780, 524, 5360}, 0, {735, 1012}, {202, 93, 92, 255}}},
    {{{2, 524, 5360}, 0, {2002, 996}, {202, 92, 91, 255}}},
    {{{0, 524, 4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{-4007, 0, 4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{-4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{0, 524, 4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{0, 0, 4007}, 0, {1999, -16}, {202, 92, 91, 255}}},
    {{{4007, 0, 0}, 0, {-763, 8}, {203, 98, 97, 255}}},
    {{{4007, 0, 4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{4783, 524, -2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{0, 524, 4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{-2, 524, 5360}, 0, {2002, 996}, {202, 92, 91, 255}}},
    {{{5780, 524, 5360}, 0, {735, 1012}, {202, 93, 92, 255}}},
    {{{5780, 524, 12}, 0, {-761, 991}, {203, 98, 97, 255}}},
    {{{4783, 524, -2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{4007, 0, 4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{0, 524, 4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{4783, 524, 4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{-4007, 0, -4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{-4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{-4783, 524, 2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{-4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{0, 524, -4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{2, 524, -5360}, 0, {2002, 996}, {202, 92, 91, 255}}},
    {{{-5780, 524, -5360}, 0, {735, 1012}, {202, 93, 92, 255}}},
    {{{-5780, 524, -12}, 0, {-761, 991}, {203, 98, 97, 255}}},
    {{{-4783, 524, 2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{-4007, 0, -4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{0, 0, -4007}, 0, {1999, -16}, {202, 92, 91, 255}}},
    {{{0, 524, -4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{-4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{4783, 524, 2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{4007, 0, -4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{4783, 524, 2}, 0, {-764, 542}, {203, 98, 97, 255}}},
    {{{5780, 524, -12}, 0, {-761, 991}, {203, 98, 97, 255}}},
    {{{5780, 524, -5360}, 0, {735, 1012}, {202, 93, 92, 255}}},
    {{{-2, 524, -5360}, 0, {2002, 996}, {202, 92, 91, 255}}},
    {{{0, 524, -4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
    {{{4007, 0, -4007}, 0, {358, 5}, {202, 93, 92, 255}}},
    {{{4783, 524, -4662}, 0, {559, 555}, {202, 93, 92, 255}}},
    {{{0, 524, -4662}, 0, {2000, 536}, {202, 92, 91, 255}}},
};


Vtx Level_Template_Grid_color[] = {
    {{{4007, 0, -4007}, 0, {-1806, 2830}, {202, 93, 92, 255}}},
    {{{-4007, 0, -4007}, 0, {2830, 2830}, {202, 93, 92, 255}}},
    {{{-4007, 0, 4007}, 0, {2830, -1806}, {202, 93, 92, 255}}},
    {{{4007, 0, 4007}, 0, {-1806, -1806}, {202, 93, 92, 255}}},
};


Gfx Level_Template_model_gfx[] = {
    // Material Rock
    gsSPDisplayList(Mars_Rock),
    // End Material Rock
    gsSPVertex(&Level_Template_Grid_001_color[0], 30, 0),
    gsSP2Triangles(0, 1, 2, 0, 0, 2, 3, 0),
    gsSP2Triangles(4, 5, 6, 0, 7, 4, 6, 0),
    gsSP2Triangles(4, 7, 8, 0, 9, 4, 8, 0),
    gsSP2Triangles(10, 11, 12, 0, 10, 12, 13, 0),
    gsSP2Triangles(14, 15, 16, 0, 14, 16, 17, 0),
    gsSP2Triangles(18, 19, 20, 0, 21, 18, 20, 0),
    gsSP2Triangles(18, 21, 22, 0, 23, 18, 22, 0),
    gsSP2Triangles(24, 13, 25, 0, 24, 25, 26, 0),
    gsSP2Triangles(0, 27, 28, 0, 0, 28, 29, 0),
    gsSPVertex(&Level_Template_Grid_001_color[14], 1, 0),
    gsSPVertex(&Level_Template_Grid_001_color[30], 22, 1),
    gsSP2Triangles(1, 2, 3, 0, 4, 1, 3, 0),
    gsSP2Triangles(1, 4, 5, 0, 6, 1, 5, 0),
    gsSP2Triangles(7, 8, 9, 0, 7, 9, 10, 0),
    gsSP2Triangles(0, 11, 12, 0, 0, 12, 13, 0),
    gsSP2Triangles(14, 15, 16, 0, 17, 14, 16, 0),
    gsSP2Triangles(14, 17, 18, 0, 19, 14, 18, 0),
    gsSP2Triangles(20, 21, 22, 0, 20, 22, 8, 0),
    // Material Ground
    gsSPDisplayList(Mars_Ground),
    // End Material Ground
    gsSPVertex(&Level_Template_Grid_color[0], 4, 0),
    gsSP2Triangles(0, 1, 2, 0, 0, 2, 3, 0),
    // Begin decor
    gsSPDisplayList(Mars_Crate),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 5, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_CrateDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPDisplayList(Mars_Metal),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 10, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_Broken_BaseDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPDisplayList(Mars_Rock),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 2, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_Rock001DisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 1, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_Rock002DisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 3, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_Rock003DisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 0, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_Rock004DisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPDisplayList(Mars_SetTextures1),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 4, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_ConsoleBDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 6, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_ConsolesDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 7, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_DishDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 8, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_DishBaseDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPMatrix((Mtx*)MATRIX_TRANSFORM_SEGMENT_ADDRESS + 9, G_MTX_MODELVIEW | G_MTX_MUL | G_MTX_PUSH),
    gsSPDisplayList(Mars_SearchlightDisplayList),
    gsSPPopMatrix(G_MTX_MODELVIEW),
    gsSPEndDisplayList(),
};
struct BaseDefinition Level_Template_Bases[] = {
    {.position = {0, 700}, .startingTeam = TEAM(0)},
    {.position = {0, 0}, .startingTeam = TEAM(1)},
    {.position = {0, 1400}, .startingTeam = TEAM(2)},
    {.position = {0, 2100}, .startingTeam = TEAM(3)},
    {.position = {800, 0}, .startingTeam = TEAM_NONE},
};

struct Vector2 Level_Template_StartingPositions[] = {
    {0, 700},
    {0, 0},
    {0, 1400},
    {0, 2100},
};

struct SceneBoundary Level_Template_Boundary[] = {
    {{4046.9, -4046.9}, {-1, 0}, 8093.81},
    {{4046.9, 4046.9}, {-0, -1}, 8093.81},
    {{-4046.9, 4046.9}, {1, 0}, 8093.81},
    {{-4046.9, -4046.9}, {-0, 1}, 8093.81},
};

struct DecorDefinition Level_Template_Decor[] = {
    {{-3000, 0, 1693.43}, {0, 0, 0, 1}, 1, ROCK004_DECOR_ID},
    {{-3000, 0, -1300}, {0, 0, 0, 1}, 1, ROCK002_DECOR_ID},
    {{-3000, 0, -3000}, {0, 0, 0, 1}, 1, ROCK001_DECOR_ID},
    {{-3000, 0, 200}, {0, 0, 0, 1}, 1, ROCK003_DECOR_ID},
    {{-1924.5, 0, -3375.11}, {0, 0, 0, 1}, 1, CONSOLEB_DECOR_ID},
    {{-1500, 0, -3600}, {0, 0, 0, 1}, 1, CRATE_DECOR_ID},
    {{-1925.3, 0, -2577.18}, {5.96046e-08, 0.0113608, -1.39698e-09, 0.999935}, 1, CONSOLES_DECOR_ID},
    {{-143.017, 61.3509, -1532.66}, {0, 0, 0, 1}, 1, DISH_DECOR_ID},
    {{-1906.71, 0, -1796.96}, {0, 0, 0, 1}, 1, DISHBASE_DECOR_ID},
    {{-1482.37, 0, -3276.73}, {0, 0, 0, 1}, 1, SEARCHLIGHT_DECOR_ID},
    {{-56.154, 0, -3700.18}, {0, 0, 0, 1}, 1.28005, BROKEN_BASE_DECOR_ID},
};
struct Vector3 Level_Template_PathingNodes[] = {
    {-3772.91, 0.0f, -923.491},
    {-3782.74, 0.0f, -2044.64},
    {-2137.56, 0.0f, 919.086},
    {-2159.02, 0.0f, 2291.72},
    {-810.262, 0.0f, -935.664},
    {-840.841, 0.0f, -2246.71},
    {-2079.97, 0.0f, -2117.43},
    {-2113.95, 0.0f, -912.049},
    {-3748.92, 0.0f, 2321.21},
    {-3767.65, 0.0f, 949.737},
    {-3747.35, 0.0f, -4073.81},
    {-2245.14, 0.0f, -4064.02},
    {-928.537, 0.0f, -4021.55},
    {926.029, 0.0f, -3950.76},
    {926.029, 0.0f, -2110.35},
    {943.017, 0.0f, -1006.11},
};
char Level_Template_BasesPathNodes[] = {
    4,
    4,
    2,
    3,
    15,
};
unsigned short Level_Template_NodeDistances[] = {
    0, 1121, 3490, 4835, 2962, 4071, 2825, 1659, 3244, 1873, 3150, 4652, 5848, 7662, 5821, 4717, 
    1121, 0, 4611, 5956, 4084, 2950, 1704, 2780, 4366, 2994, 2029, 3531, 4727, 6562, 4722, 5826, 
    3490, 4611, 0, 1372, 2280, 3592, 3037, 1831, 2962, 1630, 6492, 4990, 5369, 6980, 5139, 4035, 
    4835, 5956, 1372, 0, 3497, 4809, 4409, 3204, 1590, 2961, 7865, 6363, 6586, 8197, 6356, 5252, 
    2962, 4084, 2280, 3497, 0, 1311, 2509, 1303, 5088, 3911, 5907, 4405, 3088, 4699, 2859, 1754, 
    4071, 2950, 3592, 4809, 1311, 0, 1245, 2451, 6399, 5222, 4596, 3094, 1777, 3612, 1772, 2876, 
    2825, 1704, 3037, 4409, 2509, 1245, 0, 1205, 6000, 4667, 3455, 1953, 3022, 4858, 3017, 4122, 
    1659, 2780, 1831, 3204, 1303, 2451, 1205, 0, 4794, 3461, 4661, 3159, 4228, 6003, 4162, 3058, 
    3244, 4366, 2962, 1590, 5088, 6399, 6000, 4794, 0, 1371, 6395, 7897, 8176, 9787, 7947, 6842, 
    1873, 2994, 1630, 2961, 3911, 5222, 4667, 3461, 1371, 0, 5023, 6526, 6999, 8610, 6770, 5665, 
    3150, 2029, 6492, 7865, 5907, 4596, 3455, 4661, 6395, 5023, 0, 1502, 2819, 4675, 6368, 7473, 
    4652, 3531, 4990, 6363, 4405, 3094, 1953, 3159, 7897, 6526, 1502, 0, 1317, 3173, 4866, 5970, 
    5848, 4727, 5369, 6586, 3088, 1777, 3022, 4228, 8176, 6999, 2819, 1317, 0, 1855, 3549, 4653, 
    7662, 6562, 6980, 8197, 4699, 3612, 4858, 6003, 9787, 8610, 4675, 3173, 1855, 0, 1840, 2944, 
    5821, 4722, 5139, 6356, 2859, 1772, 3017, 4162, 7947, 6770, 6368, 4866, 3549, 1840, 0, 1104, 
    4717, 5826, 4035, 5252, 1754, 2876, 4122, 3058, 6842, 5665, 7473, 5970, 4653, 2944, 1104, 0, 
};
char Level_Template_NextNode[] = {
    0, 1, 7, 9, 7, 1, 1, 7, 9, 9, 1, 1, 1, 7, 7, 7, 
    0, 1, 0, 0, 0, 6, 6, 0, 0, 0, 10, 10, 6, 6, 6, 6, 
    7, 7, 2, 3, 4, 4, 7, 7, 3, 9, 7, 7, 4, 4, 4, 4, 
    8, 8, 2, 3, 4, 4, 2, 2, 8, 8, 2, 2, 4, 4, 4, 4, 
    7, 7, 2, 3, 4, 5, 7, 7, 3, 2, 5, 5, 5, 15, 15, 15, 
    6, 6, 4, 4, 4, 5, 6, 6, 4, 4, 12, 12, 12, 14, 14, 14, 
    1, 1, 7, 7, 7, 5, 6, 7, 7, 7, 11, 11, 5, 5, 5, 5, 
    0, 0, 2, 2, 4, 6, 6, 7, 2, 2, 6, 6, 6, 4, 4, 4, 
    9, 9, 3, 3, 3, 3, 3, 3, 8, 9, 9, 9, 3, 3, 3, 3, 
    0, 0, 2, 8, 2, 2, 2, 2, 8, 9, 0, 0, 2, 2, 2, 2, 
    1, 1, 11, 11, 11, 11, 11, 11, 1, 1, 10, 11, 11, 11, 11, 11, 
    10, 10, 6, 6, 12, 12, 6, 6, 10, 10, 10, 11, 12, 12, 12, 12, 
    5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 11, 11, 12, 13, 5, 5, 
    14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 12, 12, 12, 13, 14, 14, 
    15, 5, 15, 15, 15, 5, 5, 15, 15, 15, 5, 5, 5, 13, 14, 15, 
    4, 14, 4, 4, 4, 14, 14, 4, 4, 4, 14, 14, 14, 14, 14, 15, 
};
struct LevelDefinition Level_Template_Definition = {
    .maxPlayerCount = 4,
    .playerStartLocations = Level_Template_StartingPositions,
    .baseCount = 5,
    .decorCount = 11,
    .bases = Level_Template_Bases,
    .decor = Level_Template_Decor,
    .levelBoundaries = {{-4046.9, -4046.9}, {4046.9, 4046.9}},
    .sceneRender = Level_Template_model_gfx,
    .theme = &MarsTheme,
    .staticScene = {Level_Template_Boundary, 4},
    .pathfinding = {.nodeCount = 16, .baseNodes = Level_Template_BasesPathNodes, .nodeDistances = Level_Template_NodeDistances, .nodePositions = Level_Template_PathingNodes, .nextNode = Level_Template_NextNode},
};

